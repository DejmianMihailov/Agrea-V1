<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Запитване за продукт - Агроаптека Агреа">
    <title>Запитване за продукт | Агроаптека Агреа</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        'agro-green': '#4CAF50',
                        'agro-light': '#E8E4D9',
                        'agro-dark': '#2C2C2C',
                        'agro-green-dark': '#388E3C',
                    },
                    fontFamily: {
                        'inter': ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <script>
        (function() {
            const storedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
            if (storedTheme === 'dark' || (!storedTheme && prefersDark)) {
                document.documentElement.classList.add('dark');
            }
        })();
    </script>
</head>
<body class="font-inter bg-white text-agro-dark transition-colors duration-300 dark:bg-slate-900 dark:text-gray-100">
    
    <!-- Navigation -->
    <nav class="bg-white shadow-md fixed w-full top-0 z-50 transition-colors duration-300 dark:bg-slate-900 dark:shadow-lg">
        <div class="container mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-3">
                    <a href="index.html">
                        <img src="images/logo.png" alt="Агреа Лого" class="h-12 w-12 object-contain">
                    </a>
                    <div class="transition-colors duration-300">
                        <a href="index.html" class="text-2xl font-bold text-agro-dark dark:text-white hover:text-agro-green transition">Агреа</a>
                        <p class="text-xs text-gray-600 dark:text-gray-400">Агроаптека Дългопол</p>
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <button id="theme-toggle" data-theme-toggle aria-label="Превключи тема" class="flex items-center justify-center w-11 h-11 rounded-full border border-gray-200 text-agro-dark transition hover:bg-agro-light dark:border-slate-700 dark:text-gray-100 dark:hover:bg-slate-800">
                        <i class="fas fa-sun text-lg hidden" data-theme-icon="sun"></i>
                        <i class="fas fa-moon text-lg" data-theme-icon="moon"></i>
                    </button>
                    <a href="index.html" class="text-agro-dark hover:text-agro-green transition dark:text-gray-200">
                        <i class="fas fa-arrow-left mr-2"></i>Назад
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Inquiry Form Section -->
    <section class="pt-32 pb-16 min-h-screen bg-gradient-to-br from-agro-light/30 via-white to-agro-light dark:from-slate-800 dark:via-slate-900 dark:to-slate-800">
        <div class="container mx-auto px-4">
            <div class="max-w-3xl mx-auto">
                <!-- Header -->
                <div class="text-center mb-8">
                    <div class="inline-flex items-center justify-center w-20 h-20 rounded-full bg-agro-green/10 mb-4">
                        <i class="fas fa-envelope text-3xl text-agro-green"></i>
                    </div>
                    <h1 class="text-3xl md:text-4xl font-bold text-agro-dark dark:text-white mb-3">
                        Запитване за продукт
                    </h1>
                    <p class="text-gray-600 dark:text-gray-400">
                        Попълнете формата по-долу и ние ще се свържем с вас възможно най-скоро
                    </p>
                </div>

                <!-- Product Info Card (if product parameter exists) -->
                <div id="product-info" class="hidden mb-6 p-6 bg-white dark:bg-slate-800 rounded-2xl shadow-md border border-agro-light dark:border-slate-700">
                    <div class="flex items-center space-x-4">
                        <div class="flex-shrink-0">
                            <i class="fas fa-box text-2xl text-agro-green"></i>
                        </div>
                        <div>
                            <p class="text-sm text-gray-500 dark:text-gray-400 mb-1">Интересувате се от:</p>
                            <p id="product-name" class="text-lg font-semibold text-agro-dark dark:text-white"></p>
                        </div>
                    </div>
                </div>

                <!-- Inquiry Form -->
                <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-lg p-8 md:p-10 border border-agro-light dark:border-slate-700">
                    <form id="inquiry-form" class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="name" class="block text-gray-700 dark:text-gray-300 font-semibold mb-2">
                                    Име и фамилия <span class="text-red-500">*</span>
                                </label>
                                <input 
                                    type="text" 
                                    id="name" 
                                    name="name" 
                                    required 
                                    class="w-full px-4 py-3 border border-gray-300 dark:border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-agro-green bg-white dark:bg-slate-700 text-agro-dark dark:text-gray-100"
                                    placeholder="Вашето име"
                                >
                            </div>
                            
                            <div>
                                <label for="phone" class="block text-gray-700 dark:text-gray-300 font-semibold mb-2">
                                    Телефон <span class="text-red-500">*</span>
                                </label>
                                <input 
                                    type="tel" 
                                    id="phone" 
                                    name="phone" 
                                    required 
                                    class="w-full px-4 py-3 border border-gray-300 dark:border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-agro-green bg-white dark:bg-slate-700 text-agro-dark dark:text-gray-100"
                                    placeholder="0888 123 456"
                                >
                            </div>
                        </div>

                        <div>
                            <label for="email" class="block text-gray-700 dark:text-gray-300 font-semibold mb-2">
                                Имейл
                            </label>
                            <input 
                                type="email" 
                                id="email" 
                                name="email" 
                                class="w-full px-4 py-3 border border-gray-300 dark:border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-agro-green bg-white dark:bg-slate-700 text-agro-dark dark:text-gray-100"
                                placeholder="ваш@имейл.com"
                            >
                        </div>

                        <div>
                            <label for="product" class="block text-gray-700 dark:text-gray-300 font-semibold mb-2">
                                Продукт <span class="text-red-500">*</span>
                            </label>
                            <input 
                                type="text" 
                                id="product" 
                                name="product" 
                                required 
                                readonly
                                class="w-full px-4 py-3 border border-gray-300 dark:border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-agro-green bg-gray-50 dark:bg-slate-700 text-agro-dark dark:text-gray-100"
                            >
                        </div>

                        <div>
                            <label for="quantity" class="block text-gray-700 dark:text-gray-300 font-semibold mb-2">
                                Количество
                            </label>
                            <input 
                                type="text" 
                                id="quantity" 
                                name="quantity" 
                                class="w-full px-4 py-3 border border-gray-300 dark:border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-agro-green bg-white dark:bg-slate-700 text-agro-dark dark:text-gray-100"
                                placeholder="Напр. 5 броя, 10 кг, и т.н."
                            >
                        </div>

                        <div>
                            <label for="message" class="block text-gray-700 dark:text-gray-300 font-semibold mb-2">
                                Съобщение <span class="text-red-500">*</span>
                            </label>
                            <textarea 
                                id="message" 
                                name="message" 
                                required 
                                rows="6" 
                                class="w-full px-4 py-3 border border-gray-300 dark:border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-agro-green bg-white dark:bg-slate-700 text-agro-dark dark:text-gray-100 resize-none"
                                placeholder="Опишете вашето запитване, задайте въпроси или споделете допълнителна информация..."
                            ></textarea>
                        </div>

                        <div class="flex items-start">
                            <input 
                                type="checkbox" 
                                id="consent" 
                                name="consent" 
                                required 
                                class="mt-1 mr-3 w-5 h-5 text-agro-green focus:ring-agro-green border-gray-300 rounded"
                            >
                            <label for="consent" class="text-sm text-gray-600 dark:text-gray-400">
                                Съгласявам се обработката на моите лични данни в съответствие с политиката за поверителност. <span class="text-red-500">*</span>
                            </label>
                        </div>

                        <button 
                            type="submit" 
                            class="w-full bg-agro-green text-white px-8 py-4 rounded-full text-lg font-semibold hover:bg-agro-green-dark transition shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"
                        >
                            <i class="fas fa-paper-plane mr-2"></i>Изпрати запитване
                        </button>
                    </form>

                    <!-- Success Message -->
                    <div id="inquiry-success" class="hidden mt-6 p-6 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 text-green-700 dark:text-green-400 rounded-lg">
                        <div class="flex items-center">
                            <i class="fas fa-check-circle text-2xl mr-3"></i>
                            <div>
                                <p class="font-semibold">Благодарим за вашето запитване!</p>
                                <p class="text-sm mt-1">Ще се свържем с вас възможно най-скоро.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Error Message -->
                    <div id="inquiry-error" class="hidden mt-6 p-6 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 rounded-lg">
                        <div class="flex items-center">
                            <i class="fas fa-exclamation-circle text-2xl mr-3"></i>
                            <div>
                                <p class="font-semibold">Възникна грешка</p>
                                <p class="text-sm mt-1">Моля, опитайте отново или се свържете с нас директно.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Contact Info -->
                <div class="mt-8 text-center">
                    <p class="text-gray-600 dark:text-gray-400 mb-4">Или се свържете с нас директно:</p>
                    <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
                        <a href="tel:0885227915" class="flex items-center space-x-2 text-agro-green hover:text-agro-green-dark transition font-semibold">
                            <i class="fas fa-phone"></i>
                            <span>0885 227 915</span>
                        </a>
                        <span class="hidden sm:inline text-gray-400">|</span>
                        <a href="mailto:info@agrea.bg" class="flex items-center space-x-2 text-agro-green hover:text-agro-green-dark transition font-semibold">
                            <i class="fas fa-envelope"></i>
                            <span>info@agrea.bg</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-agro-dark text-white py-8">
        <div class="container mx-auto px-4 text-center">
            <div class="flex items-center justify-center space-x-3 mb-4">
                <img src="images/logo.png" alt="Агреа Лого" class="h-10 w-10 object-contain">
                <h3 class="text-xl font-bold">Агреа</h3>
            </div>
            <p class="text-gray-400 text-sm">
                &copy; 2024 Агроаптека Агреа. Всички права запазени.
            </p>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="js/main.js"></script>
    <script>
        // Handle product parameter from URL
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const productName = urlParams.get('product');
            
            if (productName) {
                const decodedProductName = decodeURIComponent(productName);
                const productInput = document.getElementById('product');
                const productNameDisplay = document.getElementById('product-name');
                const productInfo = document.getElementById('product-info');
                
                if (productInput) {
                    productInput.value = decodedProductName;
                }
                
                if (productNameDisplay) {
                    productNameDisplay.textContent = decodedProductName;
                }
                
                if (productInfo) {
                    productInfo.classList.remove('hidden');
                }
            }

            // Handle form submission
            const inquiryForm = document.getElementById('inquiry-form');
            const successMessage = document.getElementById('inquiry-success');
            const errorMessage = document.getElementById('inquiry-error');
            
            if (inquiryForm) {
                inquiryForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    // Hide previous messages
                    if (successMessage) successMessage.classList.add('hidden');
                    if (errorMessage) errorMessage.classList.add('hidden');
                    
                    // Get form data
                    const formData = new FormData(inquiryForm);
                    const data = Object.fromEntries(formData);
                    
                    // Add timestamp and status
                    const inquiryData = {
                        ...data,
                        id: Date.now().toString(),
                        timestamp: new Date().toISOString(),
                        status: 'new', // new, read, replied, closed
                        adminReply: null,
                        adminReplyDate: null
                    };
                    
                    // Save to localStorage
                    try {
                        const existingInquiries = JSON.parse(localStorage.getItem('inquiries') || '[]');
                        existingInquiries.push(inquiryData);
                        localStorage.setItem('inquiries', JSON.stringify(existingInquiries));
                        console.log('Inquiry saved:', inquiryData);
                    } catch (error) {
                        console.error('Error saving inquiry:', error);
                        if (errorMessage) {
                            errorMessage.classList.remove('hidden');
                            return;
                        }
                    }
                    
                    // Show success message
                    setTimeout(() => {
                        if (successMessage) {
                            successMessage.classList.remove('hidden');
                            inquiryForm.reset();
                            
                            // Scroll to success message
                            successMessage.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                            
                            // Hide product info if it was shown
                            const productInfo = document.getElementById('product-info');
                            if (productInfo) {
                                productInfo.classList.add('hidden');
                            }
                        }
                    }, 500);
                });
            }
        });
    </script>
</body>
</html>

